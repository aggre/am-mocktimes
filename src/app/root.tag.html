import riot from 'riot'

<app-root>
  <parts-header></parts-header>
  <parts-help if={isHelpOpen}></parts-help>
  <parts-mockbox patterns={mockPatterns}></parts-mockbox>
  <parts-iframe-mock if={mockUrl} data-src={mockUrl}></parts-iframe-mock>

  <script>
    import './parts/question'
    import './parts/header'
    import './parts/help'
    import './parts/iframe-mock'
    import './parts/mockbox'
    import state from '../state'
    import { observe } from 'dob'

    const {
      mock,
      help
    } = state

    this.isHelpOpen = false
    this.mockUrl = ''
    this.mockPatterns = mock.getPatterns()

    this.on('mount', () => {
      observe(() => {
        this.update({
          isHelpOpen: help.isOpen,
          mockUrl: mock.url
        })
      })
    })
  </script>
</app-root>
